import l,{Fragment as D,createContext as k,useCallback as c,useContext as L,useMemo as b,useState as R,useRef as C}from"react";import{forwardRefWithAs as A,render as y,compact as H}from"../../utils/render.js";import{useId as G}from"../../hooks/use-id.js";import{Keys as T}from"../keyboard.js";import{isDisabledReactIssue7711 as K}from"../../utils/bugs.js";import{Label as M,useLabels as x}from"../label/label.js";import{Description as U,useDescriptions as _}from"../description/description.js";import{useResolveButtonType as F}from"../../hooks/use-resolve-button-type.js";import{useSyncRefs as B}from"../../hooks/use-sync-refs.js";import{Hidden as I,Features as W}from"../../internal/hidden.js";import{attemptSubmit as O}from"../../utils/form.js";let m=k(null);m.displayName="GroupContext";let j=D;function N(f){let[n,i]=R(null),[e,a]=x(),[o,d]=_(),u=b(()=>({switch:n,setSwitch:i,labelledby:e,describedby:o}),[n,i,e,o]),p={},t=f;return l.createElement(d,{name:"Switch.Description"},l.createElement(a,{name:"Switch.Label",props:{onClick(){!n||(n.click(),n.focus({preventScroll:!0}))}}},l.createElement(m.Provider,{value:u},y({ourProps:p,theirProps:t,defaultTag:j,name:"Switch.Group"}))))}let $="button",q=A(function(n,i){let{checked:e,onChange:a,name:o,value:d,...u}=n,p=`headlessui-switch-${G()}`,t=L(m),h=C(null),S=B(h,i,t===null?null:t.setSwitch),s=c(()=>a(!e),[a,e]),w=c(r=>{if(K(r.currentTarget))return r.preventDefault();r.preventDefault(),s()},[s]),E=c(r=>{r.key===T.Space?(r.preventDefault(),s()):r.key===T.Enter&&O(r.currentTarget)},[s]),P=c(r=>r.preventDefault(),[]),v=b(()=>({checked:e}),[e]),g={id:p,ref:S,role:"switch",type:F(n,h),tabIndex:0,"aria-checked":e,"aria-labelledby":t==null?void 0:t.labelledby,"aria-describedby":t==null?void 0:t.describedby,onClick:w,onKeyUp:E,onKeyPress:P};return l.createElement(l.Fragment,null,o!=null&&e&&l.createElement(I,{features:W.Hidden,...H({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:e,name:o,value:d})}),y({ourProps:g,theirProps:u,slot:v,defaultTag:$,name:"Switch"}))}),de=Object.assign(q,{Group:N,Label:M,Description:U});export{de as Switch};
